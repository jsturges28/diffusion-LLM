<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LLaDA Diffusion Visualizer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- Animated background grid + floating characters -->
  <div id="bg-grid"></div>
  <div id="bg-floaters" aria-hidden="true"></div>

  <div id="app">
    <!-- Header -->
    <header id="header">
      <h1>
        <span class="title-accent">LLaDA</span> Diffusion Visualizer
      </h1>
      <span id="connection-badge" class="badge badge-disconnected">
        disconnected
      </span>
    </header>

    <!-- Controls panel -->
    <section id="controls">
      <div id="prompt-row">
        <label for="prompt-input">Prompt</label>
        <textarea
          id="prompt-input"
          rows="2"
          placeholder="Enter a prompt..."
          spellcheck="false"
        >Explain what a hash map is and give a Python example.</textarea>
      </div>

      <div id="mode-row">
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-experimental" />
          <span class="toggle-slider"></span>
        </label>
        <span class="toggle-label">Experimental</span>
        <span class="info-icon" aria-label="Experimental mode info">?
          <span class="tooltip">Removes recommended parameter bounds.
Values outside the default range may produce
erratic or unstable results.</span>
        </span>
      </div>

      <div id="param-row">
        <div class="param-group">
          <label for="param-steps">Steps
            <span class="param-range" id="range-steps"></span>
          </label>
          <input
            id="param-steps"
            type="number"
            step="1" value="128"
          />
        </div>
        <div class="param-group">
          <label for="param-gen-length">Gen Length
            <span class="param-range" id="range-gen-length"></span>
          </label>
          <input
            id="param-gen-length"
            type="number"
            step="1" value="128"
          />
        </div>
        <div class="param-group">
          <label for="param-block-length">Block Length
            <span class="param-range" id="range-block-length"></span>
          </label>
          <input
            id="param-block-length"
            type="number"
            step="1" value="32"
          />
        </div>
        <div class="param-group">
          <label for="param-temperature">Temperature
            <span class="param-range" id="range-temperature"></span>
          </label>
          <input
            id="param-temperature"
            type="number"
            step="0.05" value="0.0"
          />
        </div>
        <div class="param-group">
          <label for="param-cfg-scale">CFG Scale
            <span class="param-range" id="range-cfg-scale"></span>
          </label>
          <input
            id="param-cfg-scale"
            type="number"
            step="0.1" value="0.0"
          />
        </div>
        <div class="param-group">
          <label for="param-remasking">Remasking</label>
          <select id="param-remasking">
            <option value="low_confidence" selected>Low Confidence</option>
            <option value="random">Random</option>
          </select>
        </div>

        <div class="param-group param-group-btn">
          <button id="btn-generate" disabled>Generate</button>
          <button id="btn-cancel" class="btn-cancel" hidden>Cancel</button>
        </div>
      </div>

      <div id="validation-hint" hidden></div>
    </section>

    <!-- Diffusion output area -->
    <section id="output-section">
      <div id="output-area">
        <span id="output-placeholder">
          Diffusion output will appear here...
        </span>
      </div>
    </section>

    <!-- Status bar -->
    <footer id="status-bar">
      <span id="status-step">Step —/—</span>
      <span id="status-elapsed">Elapsed: —</span>
      <span id="status-message"></span>
    </footer>
  </div>

  <!-- Model loading overlay -->
  <div id="loading-overlay">
    <div id="loading-content">
      <div class="spinner"></div>
      <p>Loading LLaDA-8B-Instruct model...</p>
      <p class="loading-sub">
        This may take ~30 seconds on first run.
      </p>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
